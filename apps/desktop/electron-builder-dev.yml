appId: ai.deepractice.promptx.desktop
productName: PromptX
artifactName: promptx-desktop-${version}-${os}-${arch}.${ext}

directories:
  output: release
  buildResources: assets

files:
  - "out/**/*"
  - "assets/**/*"
  - "package.json"
  - "!**/*.map"
  - "!out/tests/**"
  - "!**/*.test.*"
  - "!**/node_modules/*/{README,readme,readme.md,readme.markdown,CHANGELOG,changelog,changelog.md,CHANGE,change,test,example,examples}"
  - "!**/node_modules/*/{.editorconfig,.eslintrc,.jshintrc,.npmignore}"
  - "!**/node_modules/**/*.ts"
  - "!**/node_modules/**/*.tsx"
  - "!**/node_modules/**/*.map"
  - "!**/node_modules/**/*.d.ts"
  - "!**/node_modules/.bin"
  - "!**/{test,__tests__,tests,testing}"
  - "!**/{example,examples,docs,doc}"
  - "!**/*.{md,MD,markdown,txt}"
  # 注意：资源文件现在从 packages 目录复制，不需要排除 node_modules 中的文件

# 将资源文件作为额外资源复制到应用程序目录外
extraResources:
  - from: "../../packages/resource/dist/resources"
    to: "resources"
    filter: ["**/*"]
  - from: "../../packages/resource/dist/registry.json"
    to: "registry.json"

# asar 配置 - 不需要特殊的 unpack 规则，因为资源文件不在 asar 中
# asarUnpack:

mac:
  category: public.app-category.developer-tools
  icon: assets/icons/icon.icns
  hardenedRuntime: true  # 启用强化运行时以匹配生产环境
  gatekeeperAssess: false
  # 使用公司证书签名
  identity: "CHINGHO YANG (2L3974JGL8)"
  notarize: false  # 本地测试暂不公证
  # 只打 ZIP 包，不打 DMG
  target:
    - target: zip
      arch: [arm64]  # 只打当前架构，更快

# 启用代码签名
forceCodeSigning: true

# 禁用 npm rebuild，加快速度
npmRebuild: false

# 关闭压缩，最快速度
compression: store